ğŸ“Œ Overview

- This guide walks through setting up an AWS system where:

- Files uploaded to an S3 bucket trigger an AWS Lambda function.

- Lambda copies the file to a backup S3 bucket.

- Lambda sends an SNS notification about the file upload.

ğŸ“‚ Required AWS Services

- Amazon S3 (Source & Backup Buckets)

- AWS Lambda (Processes the S3 Event)

- Amazon SNS (Sends notifications)

- AWS IAM (Manages permissions)

STEPS:

ğŸ”¹ Step 1: Create an S3 Source Bucket

Go to the AWS Management Console â†’ S3.

Click "Create Bucket".

Set Bucket Name: <SOURCE_BUCKET_NAME> (e.g., my-source-bucket).

Select a region and keep other settings default.

Click "Create Bucket".

ğŸ”¹ Step 2: Create an S3 Backup Bucket

Follow the same steps as above.

Set Bucket Name: <BACKUP_BUCKET_NAME> (e.g., my-backup-bucket).

Ensure itâ€™s in the same region as the source bucket.

ğŸ”¹ Step 3: Create an SNS Topic

Go to AWS Console â†’ SNS.

Click "Create Topic" â†’ Choose Standard.

Set Name: <SNS_TOPIC_NAME> (e.g., S3UploadNotifications).

Click "Create Topic" and copy the Topic ARN.

Subscribe an Email to SNS

Click "Create Subscription".

Select Protocol: Email.

Enter your Email Address â†’ Click Create Subscription.

Check your email and confirm the subscription.

ğŸ”¹ Step 4: Attach SNS Policy for S3 Access

In the SNS Console, go to Topics â†’ Select <SNS_TOPIC_NAME>.

Click Edit Access Policy â†’ Add this JSON policy:

ğŸ“„ File: sns-policy.json

Save changes.

.

ğŸ”¹ Step 5: Create an IAM Role for Lambda

Go to AWS Console â†’ IAM â†’ Roles.

Click "Create Role".

Choose AWS Service â†’ Lambda.

Attach AWSLambdaBasicExecutionRole.

Attach Custom Policy (for S3 & SNS access):

ğŸ“„ File: iam-policy.json

ğŸ”¹ Step 6: Create AWS Lambda Function

Go to AWS Console â†’ Lambda.

Click "Create Function" â†’ Select Author from Scratch.

Set Function Name: S3EventHandler.

Choose Runtime: Python 3.x.

Under Permissions, select Use an Existing Role â†’ Choose LambdaS3SNSRole.

Click Create Function.

ğŸ”¹ Step 7: Add Python Code to Lambda

ğŸ“„ File: lambda_function.py

ğŸ”¹ Step 8: Configure S3 Event Notification

Go to S3 Console â†’ Select <SOURCE_BUCKET_NAME>.

Click "Properties" â†’ Scroll to Event Notifications.

Click "Create Event Notification".

Name it S3ToLambdaTrigger.

Event Type: All object create events.

Destination: Select Lambda Function â†’ Choose S3EventHandler.

Click Save Changes.

âœ… Testing the Setup

Upload a file to <SOURCE_BUCKET_NAME>.

Check Lambda logs (AWS Console â†’ Lambda â†’ Monitor â†’ View Logs in CloudWatch).

Verify the file was copied to <BACKUP_BUCKET_NAME>.

Check SNS email notification.

ğŸ¯ Summary of Project Workflow

1ï¸.User uploads a file to S3 â†’ 2ï¸. S3 triggers Lambda â†’ 3ï¸. Lambda copies the file to backup bucket â†’ 4ï¸. Lambda sends SNS notification â†’ 5ï¸. SNS notifies subscribers.

ğŸš€ Now your system is automated and secure!

